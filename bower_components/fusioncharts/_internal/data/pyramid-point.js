import FunnelPyramidBasePoint from'./funnelpyramidbase-point';import{BLANK,preDefStr}from'../lib/lib';var UNDEF,POINTER='pointer',POSITION_START=preDefStr.POSITION_START,POSITION_END=preDefStr.POSITION_END,POSITION_MIDDLE=preDefStr.POSITION_MIDDLE,textHAlign={right:POSITION_END,left:POSITION_START,middle:POSITION_MIDDLE,start:POSITION_START,end:POSITION_END,center:POSITION_MIDDLE,undefined:BLANK,BLANK:BLANK};class PyramidPoint extends FunnelPyramidBasePoint{configure(a={}){for(var b in a)this[b]=a[b];this.upperRadiusFactor=0}getType(){return'data'}getName(){return'pyramidpoint'}getModifiedCurrentValue(a){return a+this.y/2}getRatioK(a,b){var c=a.config;return b?b/c.sumValue:1}getLowestRadiusFactor(){return 1}allocatePosition(){}drawPlots(){var a,b,c,d,e,f,g,h,i,j,k,l=this,m=l.index,n=l.getLinkedParent(),o=n.config,p=n.getFromEnv('toolTipController'),q=l.y,r=l.displayValue,s=o.isSliced,t=n.getFromEnv('chart'),u=n.getFromEnv('animationManager'),v=t.getChildContainer('trackerGroup'),w=t.getChildContainer('datalabelsGroup'),x=t.getChildContainer().plotGroup,y=l.plot,z=!!l.link,A=o.pointInContext,B=o.distanceAvailed,C=l.labelAline,D=l.appliedStyle,E=l.style,F={},G=n.config.labelDrawingConfig;return(l instanceof PyramidPoint||(d=l,l=new A,l.configure(d),n.components.data[m]=l),o.prevIs2d&&o.prevIs2d!==o.is2d&&(u.setAnimation({el:x,attr:{opacity:1},component:n}),u.setAnimation({el:w,attr:{opacity:1},component:n})),j=D&&D.color||E&&E.color||n._chartLevelAttr.color,a=s?1:l.isSliced,i={text:r,direction:BLANK,cursor:z?POINTER:BLANK,x:0,y:0,fill:j,"text-anchor":textHAlign[C]},null===q||q===UNDEF||!l.shapeArgs)?void(G[m]=k={args:i,css:D,point:l}):(c=l.getGraphicalElement('graphic'),e=l.getGraphicalElement('trackerObj'),f=g={},l.hoverEffects&&(f={color:l.rawColor,opacity:l.rawAlpha,"stroke-width":l.borderWidth,stroke:l.borderColor},h=l.rolloverProperties,g={color:h.color,opacity:h.alpha,"stroke-width":h.borderWidth,stroke:h.borderColor}),y?(l.shapeArgs.graphics=c,c=n.pyramidFunnelShape(l.shapeArgs),l.addGraphicalElement('graphic',c),u.setAnimation({el:c,attr:{fill:l.color,"stroke-width":l.borderWidth,stroke:l.borderColor},component:n}),c.show(),G[m]=k={args:i,css:D,point:l}):(l.shapeArgs.graphics=y,l.plot=y={},c=n.pyramidFunnelShape(l.shapeArgs),e=u.setAnimation({el:'path',container:v,component:n}).click(n.plotMouseUp,F).hover(n.rolloverResponseSetter(c,g),n.rolloutResponseSetter(c,f)),u.setAnimation({el:c,attr:{fill:l.color,"stroke-width":l.borderWidth,stroke:l.borderColor},component:n}),l.addGraphicalElement('graphic',c),l.addGraphicalElement('trackerObj',e),G[m]=k={args:i,css:D,point:l}),o.showTooltip?p.enableToolTip(e,l.toolText):p.disableToolTip(e),y.value=q,y.displayValue=r,y.sliced=!!a,y.cursor=z?POINTER:BLANK,y.x=l.x,y.index=m,F.datasetStore=n,F.plotItem=y,e.unclick(n.slice),l.doNotSlice||e.click(n.slice,F),k.context=F,k.actions={click:n.slice,hover:[n.rolloverResponseSetter(c,g),n.rolloutResponseSetter(c,f)]},y.dy=0,o.noOfGap?(B&&(y._startTranslateY=b='t0,'+B,y.dy=y.distanceAvailed=B),o.slicingGapPosition[l.x]&&(o.distanceAvailed-=o.perGapDistance)):y._startTranslateY=b='t0,0',u.setAnimation({el:c,attr:{transform:b},component:n}),k.transform=b,y)}}export default PyramidPoint;